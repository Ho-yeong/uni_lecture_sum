# 프로세스/데몬 관련 리눅스 기본명령어.md

### 프로세스

- 프로그램 (실행코드)이 시스템 메모리(RAM)에 적재되어 활성화(CPU에 의해 실행)된 것

### 포그라운드 프로세스

- Foreground Process
- 표준입력(키보드)를 받아들이는 프로세스(한 개만 존재)

### 백그라운드 프로세스

- Background Process
- 표준입력을 받아들이지 않는 뒤에 있는 포르세스 (다수 존재 가능)

---

---

## 프로세스 및 관리

### 1. 프로세스 (Process)

- 프로그램
  - `저장 매체(Storage)에 기록되어 있는` 실행코드
- 프로세스
  - 프로그램 (실행코드)이 시스템 메모리(RAM)에 적재되어 활성화(CPU에 의해 실행)된 것
  - 트리형태의 구조
- PID (Process ID)
  - 각 프로세스를 구분하기 위한 운영체제가 부여해준 식별번호
  - 무작위의 숫자로 부여됨
    - window 의 경우 무작위
    - linux의 경우 1씩 증가해 부여 (다른 프로세스의 번호와 같을 수 없음)
  - 부모프로세스의 ID는 PPID(Parent ID)로 정의
- 포그라운드 프로세스
- 백그라운드 프로세스

| 종류   | 설명                                                                                                                        |
| ------ | --------------------------------------------------------------------------------------------------------------------------- |
| demon  | 백그라운드로 동작중이며, 다양한 서비스(자식 프로세스 생성, 서버로써의 역할로 클라이언트 접속 허가)를 제공하기 위한 프로세스 |
| parent | 부모 프로세스                                                                                                               |
| child  | 부모 프로세스로부터 만들어진 하위 프로세스                                                                                  |
| orphan | 부모 프로세스가 먼저 소멸 되었을 경우                                                                                       |
| zombie | 프로세스 리스트에는 존재하지만, 실행되지 않는 프로세스 (무응답 상태)                                                        |

### 2. 프로세스 보기

- ps
- 동작중인 프로세스 리스트와 각각의 동작 상태를 출력
- 관련 명령어
  - top, htop, pstree

| 옵션       | 설명                                                                              |
| ---------- | --------------------------------------------------------------------------------- |
| -A 또는 -e | 시스템의 모든 프로세스 출력(PID, TTY, Time, CMD)                                  |
| -a         | 터미널에서 동작중인 모든 프로세스 출력 (섹션 리더 제외)                           |
| a          | 터미널에서 동작중인 모든 프로세스 출력 (섹션 리더 포함)                           |
| -d         | 섹션리더를 제외한 시스템의 모든 프로세스를 출력 (-A의 결과물에서 섹션리더를 제외) |
| u          | 사용자 정보 등 상세한 포맷으로 출력                                               |
| x          | 터미널을 사용하지 않는 프로세스들을 출력                                          |
| f          | 프로세스 트리 형태로 출력                                                         |
| l          | 상세한 포맷으로 출력 (PPID 포함)                                                  |
| e          | 환경변수 포함 (자신의 계정에 해당하는 프로세스만)                                 |

- kill -신호값 PID

  - 지정한 프로세스ID에게 신호값을 전달
  - 대상 프로세스는 자신의 소유이거나, kill동작 주최가 관리자 권한(root)이어야 함
  - 신호값
    - -9 (강제종료)
    - -19 (멈춤)
    - -18 (재진행)
  - -l 옵션을 통해 시그널의 종류를 볼 수 있음
  - 관련 명령어
    - killall

- jobs, bg, fg
  - jobs
    - 태스크(Task)의 리스트를 출력
  - bg
    - 태스크를 백그라운드 상태로 변경
  - fg
    - 백그라운드 상태의 태스크를 포그라운드 상태로 변경

---

## 데몬

### 1. 데몬이란?

- 윈도우즈 운영체제의 서비스 개념
- 주로 서버 프로그램을 지칭
- 일반적으로 백그라운드 프로세스로 동작
- Stndalone 과 inetd 타입으로 구분

### 2. Standalone 타입

- 서비스가 `독자적`으로 동작하는 데몬
- 일반적으로 덩치가 큰 서버프로그램
- ex) 아파치 웹서버(httpd), SQL 서버, 메일서버(Sendmail) 등
- 실행 및 종료 방법
  - service [데몬이름] {start/ stop/ restart}
- 시스템 부팅시 자동 실행을 위해 주로 /etc/init.d/ 하단에 시작 스트립트로 등록되어 있음

### 3. inetd 타입

- inetd 이름의 Standalone 타입의 독립된 데몬을 기반으로 한 하단 서비스들
  - 다른 서버프로그램을 돕는 데몬
- inetd는 베포판에 따라서 xinetd로 명명됨 (레드 햇 계열)
- 해당 설정 파일은 /etc/inetd.conf 또는 /etc/xinetd.d/ 하단에 존재

---

## 포트스캔/ 패킷 모니터링

### 포트스캔

- `nmap`
  - `서버의 포트번호 검색용`으로 사용
  - 지정한 호스트의 TCP 또는 UDP 기반의 Listening 상태의 포트 번호를 검사
  - 운영체제별 기본 열린 포트 등의 맵핑을 통해 타깃의 운영체제를 유추
  - 악용(해킹 등)으로 많이 사용되므로 서버 관리자에 의해 특별 관리 대상이 될 수 있음 (사용에 주의)

| 옵션     | 설명                                                                                         |
| -------- | -------------------------------------------------------------------------------------------- |
| -p 1-100 | 포트번호 1에서 100까지 검색                                                                  |
| -p-      | 포트번호 1 에서 65537까지 검색 (전체)                                                        |
| -f       | 빠른 검색을 위해 100여개의 잘 알려진 포트번호를 검색 ex) 21, 23, 25, 53                      |
| -sS      | TCP의 SYN 메시지 송신을 통한, 접속 허가 메시지 (SYN/ACK) 수신 기법을 적용 (관리자 권한 필요) |
| -sT      | TCP의 열린 포트번호 검색                                                                     |
| -sU      | UDP의 열린 포트번호 검색                                                                     |
| -A       | 운영체제 검색 (빠른 검색은 -O 옵션을 사용)                                                   |

### 패킷 모니터링

- `tcpdump`
  - 이더넷 장치의 송수신 데이터를 모니터링
  - TCP, UDP, IP 등 이더뎃을 통해 흘러가는 다양한 정보들을 출력
  - 이더넷이 더미허브(Dummy Hub)에 연결되어 있을 경우, 다른 시스템들의 송수신 메시지(패킷)을 모니터링 할 수 있음
  - 관리자 권한으로 실행

| 옵션        | 설명                                            |
| ----------- | ----------------------------------------------- |
| -i 이더넷명 | 지정한 이더넷상의 송수신 데이터를 조회          |
| -w 파일명   | 출력물을 지정한 파일명에 저장                   |
| -c ###      | 입력한 숫자(###)만큼 메시지를 캡쳐하고 종료     |
| -x          | 출력물을 헥사(Hexa)로 표시                      |
| host IP     | 송신 또는 수신 장치가 IP에 해당되는 것들만 출력 |
| src IP      | 송신장치가 IP에 해당되는 것들만 출력            |
| dst IP      | 수신장치가 IP에 해당되는 것들만 출력            |
