# UDP & ICMP

### UDP

- User Datagram Protocol
- 비연결형, 비신뢰적 데이터 전송, TCP 대비 빠른 데이터 전송

### ICMP

- Internet Control Message Protocol
- 주로 네트워크의 상태를 확인하기 위해 사용

---

## 1. UDP 특성

### 1. 계층적 모델

- OSI 모델에서 전송층 (Transport)에 해당하는 제 4계층의 프로토콜
- 송신프로세스와 수신프로세스 사이의 종단점 (End-to-End Point) 통신을 지원
- 응용프로그램 (어플리케이션)간의 송/수신

### 2. 역할

- `비신뢰적` 데이터 전송
- 비연결형
  - TCP와 달리 데이터 송수신을 위한 서버와 클라이언트간 `통신채널 생성과정이 없음`
- 송신 프로세스는 수신부의 정보와 보낼 데이터를 조합한 세그먼트를 `최선의 노력 (Best-Effort)`으로 전송
- TCP에 비해 헤더가 짧음 (상대적으로 데이터전송이 빠름)
- 라우팅중 네트워크 상태에 따라 세그먼트 소실 가능
- 소실된 세그먼트에 대한 복구기능이 없음

---

## 2. UDP 세그먼트

### 1. UDP 헤더

| 이름                      | 내용                                                  |
| ------------------------- | ----------------------------------------------------- |
| Source Port (16비트)      | 운영체제 내 송신 프로세스(또는 데몬)의 주소(포트번호) |
| Destination Port (16비트) | 운영체제 내 수신 프로세스(또는 데몬)의 주소(포트번호) |
| TLength (16비트)          | 헤더를 포함한 세그먼트 전체의 길이 (바이트 단위)      |
| Checksum (16비트)         | 전체 세그머트의 오류검사 (CRC 16)                     |

### 2. TCP vs UDP

- 연결 구축 및 연결 해제가 전체 통신시간에 영향을 준다면 TCP의 연결에 의한 과부하가 문제
- 한 번의 연결을 통해 많은 양의 통신이 유지되는 경우에는 TCP의 오버헤드는 별로 문제되지 않음
- UDP 추천환경
  - 동영상, 음악의 경우 실시간성이 중요
  - `중간에 한 두 프레임이 생략되더라도 전체적인 컨텐츠 감상에는 큰 문제가 없는 환경`

---

## 3. ICMP 특성 및 구조

### 1. 특성

- Internet Control Messeage Protocol
- 종단간 또는 네트워크 상의 특정 구간의 `네트워크 상태를 확인하기 위해 사용`되는 프로토콜
- PING 과 TRACEROUTE 명령이 사용하는 프로토콜

### 2. ICMP 세그먼트 구조

| 이름              | 내용                                                     |
| ----------------- | -------------------------------------------------------- |
| Type (8비트)      | ICMP의 유형 ex) 에코요청 = 8                             |
| Code (8비트)      | Type값에 따라 사용되는 추가적인 메시지 ex) 에코 응답 = 0 |
| Checksum (16비트) | 헤더에 대한 오류조사                                     |

| 종류             | 해당 메시지                 | 번호 (Type) | 코드 (Code) |
| ---------------- | --------------------------- | ----------- | ----------- |
| 오류 보고 메시지 | 목적지 도달 불가            | 3           | 1           |
|                  | Port 도달 불가 (Traceroute) | 3           | 3           |
|                  | 시간 경과 (TTL)             | 11          | 0           |
|                  | IP 헤더 오류                | 12          | 0           |
| 질의 메시지      | 에코 요청                   | 8           | 0           |
|                  | 에코 응답                   | 0           | 0           |
|                  | 타임스탬프 요청             | 13          | 0           |
|                  | 타임스탬프 응답             | 14          | 0           |
