# 클래스의 소멸자, 접근지정, 인라인 함수

### 소멸자

- 객체가 소멸될 때 실행되는 멤버 함수로서 클래스의 이름 앞에 `~`를 붙인 이름으로 선언한다

### 접근 지정

- 객체를 캡슐화함에 따라 외부에서 접근 가능한 멤버와 접근 할 수 없는 멤버를 선언하는 지시

---

---

## 클래스의 소멸자

### 1. 소멸자

```
객체가 소멸되는 시점에서 자동으로 호출되는 함수
```

- 오직 한번만 `자동호출`, 임의로 호출할 수 없음
- 객체 메모리 소멸 직전 호출됨

```
class Circle {
    Circle();
    Circle();

    ...
    ~Circle(); // 소멸자
}

Circle::~Circle() {

}
```

- 생성자는 여러개 선언이 가능 하지만 소멸자는 `하나만` 가능

- 소멸자의 목적
  - 객체가 사라질 때 마무리 작업을 위함
  - 실행도중 동적으로 할당 받은 메모리 해제, 파일 저장 및 닫기, 네트워크 닫기 등
- `소멸자는 리턴 타입이 없고, 어떤 값도 리턴하면 안됨`
- `중복 불가능`
  - 한 클래스 내에 오직 한 개만 작성 가능
  - 매개 변수 없는 함수
- 소멸자가 선언되어 있지 않으면 기본 소멸자가 자동 새성
  - 컴파일러에 의해 기본 소멸자 코드 생성
  - 아무것도 하지 않고 단순 리턴

### 생성자/소멸자 실행 순서

- 객체가 선언된 위치에 따른 분류
  - 지역 객체
    - 함수 내에 선언된 객체로서, 함수가 종료하면 소멸
  - 전역 객체
    - 함수의 바깥에 선언된 객체로서 프로그램이 종료할 때 소멸
- 생성과 `역순`으로 소멸

---

## 클래스 멤버 접근지정과 인라인 함수

### 1. 접근 지정자

- 객체 보호, 보안
- C++ 에서 객체의 캡슐화 전략
  - 객체의 상태를 나타내는 데이터 멤버(멤버 변수)에 대한 보호
  - 중요한 멤버는 다른 클래스나 객체에서 접근할 수 없도록 보호
  - 외부와의 인터페이스를 위해서 일부 멤버는 외부에서 접근 허용
- 디폴트 접근 지정은 `private`

### Private

- 동일한 클래스의 멤버 함수에만 제한함

### Public

- 모든 다른 클래스에 허용

### Protected

- 클래스 자신과 상속받은 자식 클래스에만 허용

```
private 멤버 변수의 세팅은 set~~() 이름의 멤버 함수로 값을 지정해준다
```

```
class Circle {
public:
    // public 지정
private:
    // private 지정
protected:
    // protected 지정
}
```

### 함수 호출에 따른 시간 오버헤드

- 함수 호출 -> CPU 레지스터 값 지정 -> 함수의 매개 변수를 스택에 저장 -> 함수 실행
- 함수 실행 -> 함수의 리턴 값을 임시 저장소에 저장 -> 지정한 레지스터 값 CPU에 복귀 -> 돌아갈 주소를 알아내어 리턴

```
작은 크기의 함수를 호출하면 함수 실행 시간에 비해, 호출을 위해 소요되는 부가적인 시간 오버헤드가 상대적으로 크다
```

### 인라인 함수

```
inline 으로 선언된 함수
```

- 매크로와 유사
- `코드 확장 후 인라인 함수는 사라짐`
- 함수 호출에 따른 오버헤드 존재하지 않음
- 프로그램 실행 속도 개선

- 인라인 함수의 목적

  - C++ 프로그램의 실행 속도 향상
  - 자주 호출되는 짧은 코드의 함수 호출에 대한 시간 소모를 줄임
  - C++에는 짧은 코드의 멤버 함수가 많기 떄문에

- `recursion(재귀), 긴 함수, static 변수, 반복문, switch, goto` 등을 가진 함수는 수용하지 않음

### 단점

- 인라인 함수 코드의 삽입으로 컴파일된 전체 코드 크기 증가
- 통계적으로 최대 30% 증가
- 짧은 코드의 함수를 인라인으로 선언하는 것이 좋음

### 자동 인라인 함수

- 클래스 선언부에 구현된 멤버 함수

### C++ 구조체

- 상속, 멤버, 접근 지정 등 모든 것이 클래스와 동일

```
구조체의 디폴트 접근 지정 - public
클래스의 디폴트 접근 지정 - private

struct StructName {
private:

protected:

public:

}
```

- struct 키워드 생략 가능

```
structName stObj; // C++ 구조체 객체 생성
```

### 바람직한 C++ 프로그램 작성법

- 클래스를 헤더 파일과 cpp 파일로 분리하여 작성
  - 클래스마다 분리 저장
  - 클래스 선언 부
    - 헤더 파일 (.h)에 저장
  - 클래스 구현 부
    - cpp 파일에 저장
    - 클래스가 선언된 헤더 파일 include
  - main() 등 전역 함수나 변수는 다른 cpp 파일에 분산 저장
    - 필요하면 클래스가 선언된 헤더 파일 include
