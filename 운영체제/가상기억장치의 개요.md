# 가상기억장치의 개요

### 프리페이징

- 처음부터 과도한 페이지 부재를 방지하기 위하여, 프로세스 실행에 필요할 것 같은 모든 페이지를 한꺼번에 페이지 프레임에 적재하는 기법

### 스레싱 (Thrashing)

- 프로세스의 처리시간보다 페이지 교체시간이 더 많아지는 현상

---

---

## 가상기억장치의 개요

- 보조기억장치의 일부분을 주기억장치인 것처럼 사용하는 방법

1. 주기억장치의 기억용량이 작으므로 기억용량이 큰 보조기억장치의 저장 공간을 이용함
2. 주기억장치의 기억용량보다 큰 프로그램을 실행하기 위하여 사용함
3. 가상기억장치에는 프로그램을 여러 개의 블록단위로 나누어서 보관함
4. 주기억장치에서 실행요구가 발생하면 가상기억장치의 블록단위로 저장된 프로그램을 주기억장치에 보내서 실행함
5. 주기억장치의 이용률 증가함
6. 다중프로그래밍 효율 증가함
7. 주기억장치와 가상기억장치의 주소가 다르므로 프로그램을 실행할 경우, 가상기억장치에서 주기억장치의 주소로 바꾸는 주소변환 작업이 필요함
8. 가상기억장치는 주소변환과정이 필요하므로 시스템 오버헤드가 발생할 수 있음
9. 블록단위로 나누어 사용하기 때문에 단편화를 해결할 수 있음
10. 가상기억장치는 구현이 어려움

---

## 가상기억장치의 구현방법

- 블록의 종류에 따라서
  - 페이징 기법
  - 세그먼테이션 기법

### 페이징 기법

- `프로그램을 같은 크기로 나누어 블록으로 사용`하는 기법
- 프로그램을 같은 크기로 나눈 단위를 페이지라고 함

### 세그먼테이션 기법

- `프로그램을 가변적인 크기로 나누어 블록으로 사용`하는 기법
- 프로그램을 가변적인 크기로 나눈 단위를 세그먼트라고 함

---

## 가상기억장치의 관리 전략

- 시스템 성능에 영향을 미치는 여러가지 관리 사항이 있음

### 페이지 크기

- 프로그램을 페이지 단위로 나누는 것을 말함

1. 페이지 크기가 작을 경우
   - 페이지 단편화 감소
   - 페이지 하나가 주기억장치로 이동하는 시간 감소
   - 프로세스 수행에 필요한 내용만 주기억장치에 적재
   - Locality(국부성)에 더욱 일치 가능성 때문에 기억장치 효율 증가
   - 페이지 Map 테이블이 커지고, Mapping 속도 감소
   - 디스크 접근횟수 및 I/O 시간 증가
2. 페이지 크기가 클 경우
   - 주기억장치에 적재되는 프로그램 수 감소
   - 프로세스 수행에 불필요한 내용까지 주기억장치에 적재 가능
   - "페이지 크기가 작을 경우"와 반대 상황

### Locality (국부성, 지역성, 구역성, 국소성)

- `프로세스가 실행되는 동안 주기억장치의 일부 페이지만 집중적으로 참조함`

```
스레싱 방지를 위한 Working Set 이론의 기반이 되었음
```

- 가상기억장치 관리의 이론적인 근거
- Denning 교수에 의한 구역성 개념 증명
- 캐시 기억장치 시스템의 이론적 근거

- Locality의 종류
  1. 시간 구역성 (Temporal Locality)
     - 프로세스가 실행되면서 하나의 페이지를 일정한 시간동안 집중적으로 엑세스 함
     - 한번 참조한 페이지는 빠른 시간 내 계속 참조할 가능성이 높음을 의미
     - Loop, Stack, 부프로그램 등
  2. 공간 구역성 (Spatial Locality)
     - 프로세스 실행시 일정한 위치의 페이지를 집중적으로 엑세스 함
     - 어느 하나의 페이지를 참조하면 근처의 페이지를 계속 참조 할 가능성이 높음을 의미
     - 배열 순회, 순차적 코드의 실행, 프로그램 변수 근처의 할당 장소, 같은 영역의 변수 참조

### 워킹 셋 (Working Set)

- 프로세스가 일정시간 동안 `자주 참조하는 페이지들의 집합`

1. Denning이 제안, 프로그램의 Locality 특징을 이용
2. 자주 참조되는 워킹셋을 `주기억장치에 상주시켜서 페이지 부재 및 페이지 교체 현상을 줄임`
3. 주기억장치 내의 워킹셋을 감소시키면 페이지 프레임 공간을 적게 차지하면서 워킹셋을 사용하므로 스레싱 감소
   - 주기억장치에 `최소한의 워킹셋`을 올려놓아야 함
4. 워킹셋 설정시간 간격이 증가하면 주기억장치에 유지되는 워킹셋은 커지고, 감소하면 작아짐
5. 오버헤드 발생 가능성 있음

### 페이지 부재 빈도 방식

1. 페이지 부재 (Page Fault)
   - 프로세스 싱행 시 참조할 페이지가 주기억장치에 없는 현상
2. 페이지 부재 빈도 (Page Fault Frequency)
   - 페이지 부재가 일어나는 횟수

```
페이지 부재율에 따라 주기억장치에 있는 프레임 수를 늘리거나 줄여서
페이지 부재율을 적정수준으로 유지하는 방식
```

### 프리페이징 (Prepaging)

- `처음부터 과도한 페이지부재를 방지`하기 위하여, 프로세스 실행에 필요할 것 같은 `모든 페이지를 한꺼번에 페이지 프레임에 적재`하는 기법
- 페이지들 중에 사용되지 않는 페이지가 많을 수 있음

### 스레싱 (Thrashing)

- 프로세스 처리시간보다 페이지 교체시간이 더 많아지는 현상

1. 다중프로그래밍, 가상기억장치 사용시스템에서 발생하며, 프로세스 진행 과정 중에 페이지 부재가 자주 발생 시 나타나는 현상으로, `시스템 전체 성능 저하`
2. 다중프로그래밍의 정도가 높아짐에 따라 CPU 활용도는 높아지지만 더욱 커지면 스레싱이 발생, CPU 이용률은 급격히 감소
3. CPU 이용률을 높이고 스레싱 발생을 방지하기 위하여, 다중프로그래밍 정도를 적정수준으로 유지하고, 페이지부재빈도를 조절해서 사용하며
   워킹셋을 유지해야 함
