# 선점 스케줄링

### 선점

- 프로세스 진행과정에서 CPU를 할당받아 사용하려고 우선순위로 미리 예약

### 큐 (Queue)

- FIFO 형태로 진행되는 레지스터의 한 기법

---

---

## 선점 스케줄링의 개요

- 이미 CPU 공간이 할당되어 진행중인 프로세스를 우선순위가 높은 다른 프로세스가 뺴앗아 사용 할 수 있는 스케줄링 기법

```
우선순위가 높은 프로세스를 먼저 빨리 처리 할 수 있음
```

- 빠른 응답시간을 요구하는 대화식 시분할 시스템이나 실시간 처리에 효과적
- 우선순위에 의한 선점 때문에 오버헤드를 초래함
- 일정시간 할당하도록 인터럽트용 타이머 클록(Clock) 필요함
- 알고리즘 기법
  - RR, SRT, 다단계 큐(MQ), 다단계 피드백 큐 (MFQ), 선점 우선순위 등

---

## 선점 스케줄링의 종류

### RR (Round Robin)

- FCFS 기법을 선점 형태로 변형한 기법

```
시분할 시스템에서 효과적으로 사용됨
```

- `시분할에 의한 동작`을 하므로 할당하는 시간의 크기에 따라 CPU를 사용하는 효과에 대한 영향이 큼
- 할당시간이 크면 FCFS와 같은 동작을 함
- 할당시간이 작으면 잦은 문맥교환으로 인한 오버헤드가 자주 발생

```
준비상태 큐에 도착하는 순서의 차례대로 CPU를 할당받아 실행하지만 할당된 일정시간동안 실행을 완료하지 못했을 경우
다음 순위의 프로세스에게 CPU를 비워주고 준비상태 큐의 맨 뒤로 들어감
```

- 준비상태 큐에 도착하는 순서의 차례대로 CPU를 할당 받아 실행하는 기법은 FCFS하고 같음

### SRT (Shortest Remaining Time)

- 선점 SJF 이라고도 함
- 비선점 SJF 기법을 선점 형태로 변형한 기법
- 현재 실행중인 프로세스의 남은 실행시간과 준비상태 큐에 들어온 프로세스의 실행시간을 비교하여 `더 짧은 시행시간을 갖는 프로세스에게 CPU를 할당`

```
시분할 시스템에 효과적
```

- 실행 중인 프로세스와 준비상태 큐에 있는 프로세스의 실행시간을 추적하고 보유하고 있어야하므로 오버헤드 발생이 증가함
- 긴 작업을 요구하는 프로세스는 SJF보다 대기시간이 길다

### 다단계 큐 (MQ, Multi-level Queue)

- 프로세스를 여러 개의 그룹으로 나눠서 각각의 그룹마다 각각의 준비 상태 큐를 사용하는 기법

```
시스템 프로세스, 대화형 프로세스, 편집 프로세스, 일괄처리 프로세스 등으로 나누고
각 프로세스 별로 준비상태 큐를 배치함
```

- 각각의 준비상태 큐는 `독자적인 스케줄링 기법을 사용`
- 프로세스가 각각의 준비상태 큐 가운데 한군데 진입하면 다른 준비 상태 큐로 이동 할 수 없음

```
우선순위가 높은 단계의 준비상태 큐에 프로세스가 들어오면 낮은 단계의 준비상태 큐에 있는 프로세스는 CPU를 비워주고,
우선순위가 높은 단계의 준비상태 큐에 있는 프로세스가 CPU를 할당 받음
```

### 다단계 피드백 큐 (MFQ, Multi-level Feedback Queue)

- 프로세스를 여러 개의 그룹으로 나눠서 각각의 그룹마다 각각의 준비상태 큐를 사용하는 기법

```
프로세스가 각각의 준비상태 큐 가운데 한군데 진입하더라도 다른 준비상태 큐로 `이동 할 수 있음`
```

- 각 준비상태 큐 별로 시간 할당량을 주고 할당시간 안에 프로세스를 완료하지 못하면 다음 준비상태 큐 단계로 이동함
- 상위단계 준비상태 큐가 우선순위가 높으면서 시간 할당량이 적음

```
우선순위가 높은 단계의 준비상태 큐에 프로세스가 들어오면 낮은 단계의 준비상태 큐에 있는 프로세스는 CPU를 비워주고,
우선순위가 높은 단계의 준비상태 큐에 있는 프로세스가 CPU를 할당 받음
```

- 마지막 단계 준비상태 큐에서는 작업이 완료될때ㅏ낒 RR 기법을 사용함

- 우선순위 결정
  - 요구 시간이 적은 프로세스
  - 입출력 중심의 프로세스
  - 낮은 우선순위에서 오래 기다린 프로세스
- MFQ 스케줄링 알고리즘을 정의하는 요소
  - 큐의 수

### 선점 우선순위

- 준비상태 큐의 프로세스 중에 `우선순위가 가장 높은 프로세스`에게 CPU를 할당

```
비선점 스케줄링 기법 중에 우선 순위 스케줄링을 선점 우선순위 스케줄링 기법 형태로 변경한 것임
```
