# 스레드

### 스레드 (Thread)

- 프로세스 내에서 프로그램을 실행하는 작업 단위

### 단일 스레드

- 하나의 프로세스에 한 개의 스레드가 존재

### 다중 스레드

- 하나의 프로세스에 여러 개의 스레드가 존재

---

---

## 스레드의 개요

### Thread 란?

```
프로세스 내에서 프로그램을 실행하는 작업 단위
```

- 프로세스 내부에서 프로세스의 일부 기능을 갖고 있기 때문에 `경량 프로세스(LWP, Light Weight Process)`라고도 함
- 프로세스는 하나 혹은 여러 개의 스레드를 포함함
- 작업을 수행 할 때는 스레드가 반드시 필요함
- 하나의 스레드는 독립된 작업수행과 작업제어를 하기 위해 `자기만의 스택과 레지스터를 가짐`

---

## 스레드의 종류

- 단일 스레드

  - 중량 프로세스
  - 하나의 프로세스에 한 개의 스레드가 존재

- 다중 스레드
  - 경량 프로세스
  - 하나의 프로세스에 여러 개의 스레드가 존재

### 운영체제의 종류에 따른 분류

- 사용자 수준의 스레드

  - 사용자가 만든 라이브러리를 사용하여 스레드를 운용
  - 사용자 수준 스레드 여러 개가 커널 스레드 하나로 매핑됨
    - 다대일 스레드 매핑
  - 속도는 빠르지만 구현이 어려움
  - 문맥 교환이 적음
  - 독자적 알고리즘이 필요함
  - 대형 시스템에 적당함
  - CPU사용을 해제 못하면 시스템이 중단됨

- 커널 수준의 스레드
  - 운영체제의 커널에 의해서 스레드를 운용
  - 사용자 수준 스레드 한 개가 커널 스레드 하나로 매핑 됨
    - 일대일 스레드 매핑
  - 구현이 쉽지만 속도가 느림
  - 문맥 교환이 많음
  - 독자적 알고리즘이 필요 없음
  - 대형시스템에 적당하지 않음
  - CPU 사용을 해제 못하면 운영체제가 지원함

---

## 스레드의 상태

```
하나의 CPU가 하나의 스레드를 실행함
```

- 여러 개의 CPU가 여러 개의 스레드를 각각 동시에 처리하면 병렬처리

- 준비
  - 스레드가 프로세스에 의해서 실행 될 수 있는 상태
- 실행
  - 스레드가 프로세스에 의해서 실행중인 상태, 활성화 된 상태
- 대기
  - 스레드가 입출력 작업이 완료될 떄 까지 대기
  - `스레드가 정보를 스택에 저장`
  - 같은 프로세스 내의 다른 스레드가 실행 될 수 있음
- 종료
  - 스레드가 작업을 완전히 종료한 상태
  - `레지스터와 스택을 비움`

---

## 스레드의 장점

### 스레드의 장점

- 단일 프로세스를 여러 개의 스레드로 생성하여 `병행성`을 증진시킬 수 있음
- 하드웨어와 운영체제의 성능과 응용프로그램의 처리율을 향상시킬 수 있음
- 실행환경을 공유시켜서 기억장소의 낭비가 줄어듦
- 프로세스간의 통신 속도가 향상 됨
- 공통적으로 접근 가능한 기억장치를 통해 효율적을 통신함
- 동일한 프로세스 환경에서 각각의 독립적인 다중 수행이 가능함
- 스레드 기반 시스템에서 스레드는 독립적인 스케줄링의 최소단위로써 프로세스의 역할을 담당함
