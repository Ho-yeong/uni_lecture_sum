# 스트링 매칭과 기하 알고리즘

### 스트링 매칭 (String matching)

- 주어진 텍스트에서 주어진 패턴이 어디에 나타나는지를 알아내는 문제

### 최대 접두부 테이블

- 패턴을 전처리하여, 패턴의 각 위치에 대하여 접두부의 끝위치를 계산하여 저장한 테이블 KMP 알고리즘에서는 텍스트 위치 i와
- 패턴위치 j에서 불일치가 발생하면 최대 접두부 테이블을 이용하여 비교될 패턴의 다음 위치 [SP[j-1]+1]을 계산한다.

---

---

## 직선적 매칭

- 스트링 매칭 문제란?

```
주어진 텍스트에서 주어진 패턴이 어디에 나타나는지를 알아내는 문제
```

- 스트링 x의 길이 : |x|
- 공 스트링 : 길이가 0인 스트링
- 스트링 접속 xy: 스트링 x뒤에 y를 붙인 것

1. 직선적 알고리즘

- 텍스트의 매 위치에서 패턴 일치가 발생하는 지를 조사하는 방법

```
텍스트T: abgoodfathgoodkhfobj
패턴 P: good
```

- T[0]와 P[0]부터 하나씩 비교해 나가는데 이를 불일치가 발생할 때까지 반복함
- 시간복잡도 O(mn)

---

## 라빈카프 알고리즘

- 최악의 시간복잡도는 O(mn)이지만 평균적으로는 매우 빠른 알고리즘으로서
- 스트링을 숫자값으로 바꾸어, 즉 해시(hash)값을 계산하여 매칭하는 알고리즘

1. 스트링을 | 시그마 | = d진법의 숫자로 바꾸어 이 숫자를 비교하려는 방법
2. mod연산(나머지 연산)이 사용되는 이유는 숫자가 너무 커져서 오버플로우가 발생하는 것을 피하기 위함
3. 시간복잡도의 최악은 O(mn)이지만 기대치는 O(m+n)

## 호너의 방법

```
만약 패턴이 31413이라면 텍스트와 패턴의 각 위치의 숫자는 실제로는 문자 31413
```

---

## KMP 알고리즘

- Knuth-Morris-Pratt 세명의 이름을 따서 만든 알고리즘
- 최저의 시간으로 문자열 속의 패턴을 찾아내는 것

### 개요

- 패턴의 최대 접미부와 접두부 쌍을 구하여 불일치 발생시 텍스트의 앞부분으로 돌아감이 없이 패턴 매칭을 하는 방법을 사용
- 이미 비교한 텍스트의 앞부분을 다시 비교하는 일이 없게 됨

1. 패턴을 전처리하여 접미부와 최대로 일치하는 진접두부를 구하고 이를 이용하여 최대 접두부 테이블 SP에 만들어 놓음
2. 텍스트의 위치와 패턴의 위치를 비교한 결과 불일치가 발생하면 다음에 비교할 위치는 일치하지 않는 부분의 왼쪽 부분을 가지고 경계를 찾음
3. 직선적 방법이나 라빈카프의 방법 최악 시간복잡도는 O(mn)이지만 KMP는 O(m+n)이 됨

### 방법

1. 비교할 패턴을 문자열의 첫 번째에 위치 시킴
2. 먼저 비교할 패턴을 문자열의 비교할 대상과 위치시키고 비교를 함
3. 패턴의 왼쪽에서 오른쪽으로 비교를 하면서 일치하지 않는 부분을 찾음
   - 일치하는 문자열을 찾으면 성공 종료함
4. 일치하지 않는 부분의 왼쪽부분을 가지고 경계를 찾음
   - 경계를 찾지 못하면 문자열과 패턴의 틀린부분 만큼 이동함
5. 경계를 찾으면 접미부와 접두부가 나오는데 경계가 1개면 상관없지만 2개 이상도 나올 수 있으며
   - 선택하는 경계는 경계의 최대가 되었을 경우를 설정
6. 이동을 하면 2번으로 이동하여 반복적으로 수행함
